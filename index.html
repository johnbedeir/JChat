<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <title>jChat</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/fontawesome-all.min.css">
    <link rel="stylesheet" type="text/css" href="css/iofrm-style.css">
    <link rel="stylesheet" type="text/css" href="css/iofrm-theme12.css">
    <link rel="shortcut icon" type="image/svg" href="images/Final_icon.svg"/>
</head>
<body>
    <div class="form-body">
        <div class="row" >
            <div class="form-holder">
                <div class="form-content">
                    <div class="form-items" id="login-area">
                        <div class="website-logo-inside" id="login-text">
                            <a href="index.html">
                                <div class="logo">
                                    <img class="logo-size" src="images/Final.svg" alt="">
                                </div>
                            </a>
                        </div>
                        <h3>Chat anonymously with others via JChat.</h3>
                        <!-- <p>Access to our public chatting room.</p> -->
                        <p>Coming Soon ...</p>
                        <div id="login-form-area">
                            <form id="login-form" class="form-button">
                                <input id="username" class="form-control" type="text" name="username" placeholder="User Name" autocomplete="off">
                                <button onclick="login()" id="login-submit" type="submit" class="ibtn">Login</button> 
                            </form>
                        </div>
                        <div class="social">
                            <a href="https://www.linkedin.com/in/johnbedeir/" target="blank" ><i class="fab fa-linkedin"></i></a>
                            <a href="https://www.instagram.com/johnbedeir/" target="blank"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.youtube.com/channel/UCxvd-DdyFsE_07lCa4kRINA" target="blank" ><i class="fab fa-youtube"></i></a>
                            <a href="https://hub.docker.com/u/triple3a" target="blank"><i class="fab fa-docker"></i></a>
                            <a href="https://github.com/triplea-git" target="blank"><i class="fab fa-github"></i></a>
                            <a href="mailto:info@johnydev.com" target="blank"><i class="fab fa-telegram-plane"></i></a>
                        </div> 
                    </div>
                </div>
            </div>

        <div id="chat-area">
            <div id="users-area">
                <div id="online-users-text">
                    <h1>Online users:</h1> 
                </div>
                <div id="online-users">
                    <ul id="users">   </ul>
                </div>
            </div>

            <div id="message-area">
                <div id="display-message-area">
                    <ul id="messages">
                        
                    </ul>
                </div>

                <div id="message-form-area">
                    <form id="message-form">
                        <input id="message" type="text" placeholder="Type your message..." autocomplete="off">
                        <input id="message-submit" type="submit" value="SEND">
                    </form>
                </div>

            </div>
        </div>


        </div>
    </div>
<script type="text/javascript">
        var socket = io()

        function updateUsers(list) {
            for(var i = 0; i < list.length; i++) {
                $("#users").append("<li><b>" + list[i] + "</b></li>");
            }
        }

        function login(){
          var loginArea = document.getElementById("login-area");
          var chatArea = document.getElementById("chat-area");
          var Text = document.getElementById("username");
            

          if(Text.value) {
            event.preventDefault();  
            $username = $("#username").val();
            loginArea.style.display="none";
            chatArea.style.display="block";

            $("#messages").html("");

            socket.emit("has connected", $username);
          } else {
            alert("Type a username!");
          }


        }
        //$("#login-form").submit(function(event){
            //event.preventDefault();
            
            //$("#login-area").hide();
          //  $("#chat-area").show();

            
        //});

        $("#message-form").submit(function(event){
            event.preventDefault();

            if($("#message").val() == "" || $("#message").val() == " ") {
                alert("You can't send empty messages!");
            } else {
                socket.emit("new message", {username: $username, message: $("#message").val()});
                $("#message").val("");
            }
        });

        socket.on("has connected", function(data) {
            $("#users").html("");
            updateUsers(data.usersList);
            $("#messages").append("<li><i><b>" + data.username + "</b> has connected</i></li>")
        });

        socket.on("has disconnected", function(data) {
            $("#users").html("");
            updateUsers(data.usersList);
            $("#messages").append("<li><i><b>" + data.username + "</b> has disconnected</i></li>")
        });

        socket.on("new message", function(data) {
            $("#messages").append("<li><b>" + data.username + "</b>:" + data.message + "</li>");
        });
</script>


<script src="js/jquery.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/main.js"></script>
</body>
</html>